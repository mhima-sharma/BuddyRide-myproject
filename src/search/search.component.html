<!-- SEARCH BAR -->
<div class="flex flex-col sm:flex-row flex-wrap bg-white h-auto px-4 py-4 w-full mx-auto items-center gap-3 shadow-md rounded-2xl border border-gray-200">

  <!-- FROM -->
  <div class="flex items-center gap-2 px-3 py-2 flex-1 w-full border border-gray-200 rounded-lg focus-within:ring-2 focus-within:ring-sky-400 transition">
    <span class="text-gray-400 text-lg"><i class="fa-solid fa-location-dot"></i></span>
    <input
      #fromInput
      type="text"
      [(ngModel)]="from"
      placeholder="Leaving from"
      class="bg-transparent outline-none text-sm text-gray-700 w-full placeholder-gray-400"
    />
  </div>

  <!-- TO -->
  <div class="flex items-center gap-2 px-3 py-2 flex-1 w-full border border-gray-200 rounded-lg focus-within:ring-2 focus-within:ring-sky-400 transition">
    <span class="text-gray-400 text-lg"><i class="fa-solid fa-location-dot"></i></span>
    <input
      #toInput
      type="text"
      [(ngModel)]="to"
      placeholder="Going to"
      class="bg-transparent outline-none text-sm text-gray-700 w-full placeholder-gray-400"
    />
  </div>

  <!-- DATE -->
  <div class="flex items-center gap-2 px-3 py-2 flex-1 w-full border border-gray-200 rounded-lg focus-within:ring-2 focus-within:ring-sky-400 transition">
    <span class="text-gray-400 text-lg"><i class="fa-solid fa-calendar"></i></span>
    <input
      type="date"
      [(ngModel)]="selectedDate"
      class="bg-transparent outline-none text-sm text-gray-700 w-full"
    />
  </div>

  <!-- PASSENGER -->
  <div class="flex items-center gap-3 px-3 py-2 flex-1 w-full border border-gray-200 rounded-lg justify-center">
    <button
      class="w-8 h-8 flex items-center justify-center border border-gray-300 text-gray-400 text-lg rounded hover:bg-gray-100 disabled:opacity-30 transition"
      (click)="decrease()"
      [disabled]="passengerCount <= 1"
    >
      &minus;
    </button>

    <span class="text-gray-800 font-semibold text-sm">{{ passengerCount }}</span>

    <button
      class="w-8 h-8 flex items-center justify-center border border-sky-500 text-sky-500 text-lg rounded hover:bg-sky-50 transition"
      (click)="increase()"
    >
      &#43;
    </button>
  </div>

  <!-- SEARCH BUTTON -->
  <button
    type="button"
    (click)="searchRides()"
    class="bg-orange-700 hover:bg-orange-800 text-white disabled:bg-gray-400  font-semibold px-6 py-2 rounded-lg text-sm transition self-start sm:self-auto shadow-md"
  >
    Search
  </button>
</div>

<!-- LOADER -->
<div *ngIf="isSearching" class="flex justify-center items-center min-h-[200px] mt-6 w-full">
  <img
    src="../assets/images/original-a13912f45623da52a215e6a1def2aac3.gif"
    alt="Searching..."
    class="w-32 h-24"
  />
</div>

<!-- AVAILABLE RIDES -->
<div *ngIf="!isSearching && rides.length > 0" class="mt-8 w-full max-w-6xl mx-auto px-4 mb-2">

  <!-- Section Title -->
  <h2 class="text-3xl font-bold text-orange-600 mb-8 text-center flex items-center justify-center gap-2">
    <i class="fas fa-car-side"></i> Available Rides
  </h2>

  <!-- Ride Cards -->
  <div *ngFor="let ride of rides" 
       (click)="openRideDetailModal(ride)"
       class="p-6 bg-white rounded-3xl shadow-md hover:shadow-xl border border-orange-100 cursor-pointer w-full transition duration-300 hover:scale-[1.02]">

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-gray-700">

      <!-- From Location -->
      <div class="flex items-center gap-2">
        <i class="fas fa-map-marker-alt text-orange-500 text-lg"></i>
        <div>
          <p class="text-xs font-medium text-gray-400">From</p>
          <p class="text-lg font-semibold text-gray-800">{{ ride.from_location }}</p>
        </div>
      </div>

      <!-- To Location -->
      <div class="flex items-center gap-2">
        <i class="fas fa-map-pin text-red-500 text-lg"></i>
        <div>
          <p class="text-xs font-medium text-gray-400">To</p>
          <p class="text-lg font-semibold text-gray-800">{{ ride.to_location }}</p>
        </div>
      </div>

      <!-- Date & Time -->
      <div class="flex items-center gap-2">
        <i class="far fa-calendar-alt text-blue-500 text-lg"></i>
        <div>
          <p class="text-xs font-medium text-gray-400">Date & Time</p>
          <p class="text-lg text-gray-800">
            <span class="font-semibold">Date:</span> {{ ride.date | date: 'mediumDate' }}
            <span class="font-semibold ml-2">Time:</span> {{ ride.time }}
          </p>
        </div>
      </div>

      <!-- Seats Available -->
      <div class="flex items-center gap-2">
        <i class="fas fa-user-friends text-green-500 text-lg"></i>
        <div>
          <p class="text-xs font-medium text-gray-400">Seats Available</p>
          <p class="text-lg font-semibold text-gray-800">{{ ride.passengers }}</p>
        </div>
      </div>

    </div>
  </div>
</div>


<!-- NO RIDES FOUND -->
<div *ngIf="!isSearching && rides.length === 0" class="text-center text-gray-500 mt-10 w-full">
  <p>No rides available. Try changing your filters.</p>
</div>
