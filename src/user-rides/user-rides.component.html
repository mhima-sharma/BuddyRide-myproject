<app-header></app-header>

<div class="min-h-screen bg-gray-50 px-4 py-8 mt-20">
  <div class="max-w-6xl mx-auto">

    <!-- TABS -->
    <div class="flex gap-4 border-b mb-6">
      <button
        class="px-4 py-2 font-semibold"
        [ngClass]="activeTab === 'my' ? 'border-b-2 border-orange-600 text-orange-600' : 'text-gray-500'"
        (click)="changeTab('my')">
        My Bookings
      </button>

      <button
        class="px-4 py-2 font-semibold"
        [ngClass]="activeTab === 'driver' ? 'border-b-2 border-orange-600 text-orange-600' : 'text-gray-500'"
        (click)="changeTab('driver')">
        Rider's Requests
      </button>
    </div>

    <!-- LOADER -->
    <div *ngIf="loading" class="text-center py-10 text-gray-500">
      Loading...
    </div>

    <!-- EMPTY -->
    <div *ngIf="!loading && rides.length === 0" class="text-center py-10 text-gray-400">
      No rides found
    </div>

    <!-- LIST -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div
        *ngFor="let ride of rides"
        class="bg-white rounded-xl shadow p-5 hover:shadow-lg transition">

        <div class="font-semibold text-lg">
          {{ ride.from_location }} → {{ ride.to_location }}
        </div>

        <div class="text-sm text-gray-500 mt-1">
          {{ ride.date | date }} • {{ ride.time }}
        </div>

        <div class="mt-3 flex justify-between items-center">
          <div class="text-orange-600 font-bold">
            ₹{{ ride.total_amount || ride.price_per_seat }}
          </div>

          <span
            class="px-3 py-1 rounded-full text-xs capitalize"
            [ngClass]="{
              'bg-yellow-100 text-yellow-700': ride.status === 'pending',
              'bg-green-100 text-green-700': ride.status === 'accepted',
              'bg-red-100 text-red-700': ride.status === 'rejected'
            }">
            {{ ride.status || 'available' }}
          </span>
        </div>

        <!-- ACCEPT / REJECT BUTTONS (ONLY FOR DRIVER + PENDING) -->
        <div
          *ngIf="activeTab === 'driver' && ride.status === 'pending'"
          class="mt-4 flex gap-3">

          <button
            class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg"
            (click)="updateStatus(ride.id, 'accepted')">
            Accept
          </button>

          <button
            class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg"
            (click)="updateStatus(ride.id, 'rejected')">
            Reject
          </button>
        </div>

      </div>
    </div>

  </div>
</div>

<app-footer></app-footer>
