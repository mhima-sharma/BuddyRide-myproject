<div class="flex min-h-screen  from-orange-50 via-white to-orange-100">

  <!-- ================= SIDEBAR ================= -->
  <aside
    class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl border-r transform transition-transform duration-300 md:translate-x-0"
    [ngClass]="{'-translate-x-full': !sidebarOpen, 'translate-x-0': sidebarOpen}">

    <!-- SIDEBAR HEADER -->
    <div class="p-6 border-b flex justify-between items-center">
      <div>
        <h2 class="text-2xl font-bold text-orange-600">BuddyRide</h2>
        <p class="text-xs text-gray-500">Admin Panel</p>
      </div>
      <!-- Close button for mobile -->
      <button class="md:hidden text-gray-400 hover:text-gray-600" (click)="toggleSidebar()">✕</button>
    </div>

    <!-- SIDEBAR NAV -->
    <nav class="p-4 space-y-2">
      <button
        *ngFor="let tab of tabs"
        (click)="changeTab(tab.key); sidebarOpen=false"
        class="w-full flex justify-between items-center px-4 py-3 rounded-lg text-sm transition duration-300"
        [ngClass]="{
          'bg-orange-500 text-white shadow-lg': activeTab === tab.key,
          'text-gray-700 hover:bg-orange-100': activeTab !== tab.key
        }">
        <span class="flex items-center gap-2">
          <!-- Font Awesome icon -->
          {{ tab.label }}
        </span>
        <span
          class="text-xs px-2 py-0.5 rounded-full font-semibold"
          [ngClass]="{
            'bg-white text-orange-600': activeTab === tab.key,
            'bg-orange-100 text-orange-600': activeTab !== tab.key
          }">
          {{ tab.count }}
        </span>
      </button>
    </nav>
  </aside>

  <!-- MOBILE OVERLAY -->
  <div
    *ngIf="sidebarOpen"
    class="fixed inset-0 bg-black bg-opacity-40 z-40 md:hidden"
    (click)="sidebarOpen = false">
  </div>

  <!-- ================= MAIN CONTENT ================= -->
  <main class="flex-1 flex flex-col ml-0 md:ml-64 min-h-screen">

    <!-- HEADER -->
    <div class="flex justify-between items-center p-4 md:p-6 bg-white shadow sticky top-0 z-30">
      <div class="flex items-center gap-4">
        <!-- Mobile menu button -->
        <button class="md:hidden bg-orange-500 text-white p-2 rounded-lg" (click)="toggleSidebar()">
          ☰
        </button>
        <div>
          <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Admin Dashboard</h1>
          <p class="text-xs md:text-sm text-gray-500">Overview & Management</p>
        </div>
      </div>

      <button
        (click)="logout()"
        class="bg-red-500 hover:bg-red-600 text-white px-4 md:px-5 py-2 rounded-lg shadow-md flex items-center gap-2 text-xs md:text-sm">
        <i class="fa-solid fa-right-from-bracket"></i> Logout
      </button>
    </div>

    <!-- SCROLLABLE CONTENT -->
    <div class="flex-1 overflow-auto p-4 md:p-6 space-y-6">

      <!-- ================= STATS ================= -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
        <div class="bg-white p-4 md:p-6 rounded-2xl shadow hover:shadow-lg transition cursor-pointer flex items-center gap-3 md:gap-4">
          <div class="bg-orange-100 text-orange-600 p-3 rounded-full">
            <i class="fa-solid fa-users"></i>
          </div>
          <div>
            <p class="text-xs md:text-sm text-gray-500">Users</p>
            <p class="text-xl md:text-2xl font-bold ">{{ usersCount }}</p>
          </div>
        </div>

        <div class="bg-white p-4 md:p-6 rounded-2xl shadow hover:shadow-lg transition cursor-pointer flex items-center gap-3 md:gap-4">
          <div class="bg-blue-100 text-blue-600 p-3 rounded-full">
            <i class="fa-solid fa-car"></i>
          </div>
          <!-- <div>
            <p class="text-xs md:text-sm text-gray-500">Rides</p>
            <p class="text-xl md:text-2xl font-bold">{{ ridesCount }}</p>
          </div> -->
        </div>

        <div class="bg-white p-4 md:p-6 rounded-2xl shadow hover:shadow-lg transition cursor-pointer flex items-center gap-3 md:gap-4">
          <div class="bg-yellow-100 text-yellow-600 p-3 rounded-full">
            <i class="fa-solid fa-clipboard-list"></i>
          </div>
          <div>
            <p class="text-xs md:text-sm text-gray-500">Ride Requests</p>
            <p class="text-xl md:text-2xl font-bold">{{ rideRequestsCount }}</p>
          </div>
        </div>

        <div class="bg-white p-4 md:p-6 rounded-2xl shadow hover:shadow-lg transition cursor-pointer flex items-center gap-3 md:gap-4">
          <div class="bg-red-100 text-red-600 p-3 rounded-full">
            <i class="fa-solid fa-triangle-exclamation"></i>
          </div>
          <div>
            <p class="text-xs md:text-sm text-gray-500">Complaints</p>
            <p class="text-xl md:text-2xl font-bold">{{ complaintsCount }}</p>
          </div>
        </div>
      </div>

      <!-- ================= TAB CONTENT ================= -->
      <div class="bg-white rounded-2xl shadow-md p-4 md:p-6 text-gray-600 text-sm overflow-auto">
        <ng-container [ngSwitch]="activeTab">
          <p *ngSwitchCase="'users'">
            <app-all-users></app-all-users> 
          </p>
          <p *ngSwitchCase="'signup_users'">Signup Requests table here</p>
          <p *ngSwitchCase="'social'">
            <app-social></app-social>
          </p>
          <p *ngSwitchCase="'published_rides'">
            <app-publish-rides></app-publish-rides>
          </p>
          <p *ngSwitchCase="'ride_requests'">
            <app-ride-list></app-ride-list>
          </p>
          <p *ngSwitchCase="'complaints'">
            <app-complaints></app-complaints>
          </p>
          <p *ngSwitchDefault>Select a section from sidebar</p>
        </ng-container>
      </div>
    </div>
  </main>
</div>
